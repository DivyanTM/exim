<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description"
        content="Sleek Dashboard - Free Bootstrap 4 Admin Dashboard Template and UI Kit. It is very powerful bootstrap admin dashboard, which allows you to build products like admin panels, content management systems and CRMs etc.">

    <!-- theme meta -->
    <meta name="theme-name" content="sleek" />

    <title>DRY PORT | CHECK IN</title>

    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500|Poppins:400,500,600,700|Roboto:400,500"
        rel="stylesheet" />

    <link href="https://cdn.materialdesignicons.com/4.4.95/css/materialdesignicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css">
    <!-- PLUGINS CSS STYLE
    <link href="assets/plugins/simplebar/simplebar.css" rel="stylesheet" />
    <link href="assets/plugins/nprogress/nprogress.css" rel="stylesheet" /> -->

    <!-- No Extra plugin used -->
    <link href='assets/plugins/jvectormap/jquery-jvectormap-2.0.3.css' rel='stylesheet'>
    <link href='assets/plugins/daterangepicker/daterangepicker.css' rel='stylesheet'>


    <link href='assets/plugins/toastr/toastr.min.css' rel='stylesheet'>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

    <!-- ✅ Bootstrap (if you're using it) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ✅ DataTables core (CSS & JS) -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>

    <!-- ✅ DataTables extensions like Select (if needed) -->
    <link rel="stylesheet" href="https://cdn.datatables.net/select/1.7.0/css/select.dataTables.min.css">
    <script src="https://cdn.datatables.net/select/1.7.0/js/dataTables.select.min.js"></script>

    <!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>



  <style>
    #details p{
      font-size: 0.85rem !important;
      
    }
    body{
        background-color: #1e1e1e !important;
    }
  </style>


    <!-- SLEEK CSS -->
    <link id="sleek-css" rel="stylesheet" href="assets/css/sleek.css" />

    <!-- FAVICON -->
    <!-- <link href="assets/img/favicon.png" rel="shortcut icon" /> -->

    <!--
      HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
    -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="assets/plugins/nprogress/nprogress.js"></script>
    <style>
        #sidebar-menu li a span {
            font-size: 0.6rem;
        }
    </style>
</head>

<body class="header-fixed sidebar-fixed sidebar-dark header-light" id="body">
    <script>
        NProgress.configure({ showSpinner: false });
        NProgress.start();
    </script>

    <div id="toaster"></div>


    <div class="wrapper">
        <div class="container-fluid">
            <div class="row d-flex h-100">
                
                <div class="col-md-4 bg-dark text-white p-0" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen;">
                    <div class="p-4" style="background-color: #1e1e1e; min-height: 100vh;">
                  
                  
                        <a href="test.html" style="text-decoration: none;">
                            <button style="
                              background-color: #1c1c1e;
                              color: #f2f2f7;
                              padding: 8px 18px;
                              border-radius: 6px;
                              border: 1px solid #2c2c2e;
                              margin-bottom: 30px;
                              font-size: 13px;
                              letter-spacing: 0.5px;
                              transition: background 0.3s ease;
                            " onmouseover="this.style.backgroundColor='#2a2a2c'" onmouseout="this.style.backgroundColor='#1c1c1e'">
                              ← Back
                            </button>
                          </a>
                          
                          <div style="
                            color: #f2f2f7;
                            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                            max-width: 1200px;
                            margin: auto;
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                            gap: 10px;
                          ">
                          
                            <!-- Info Panel -->
                            <section style="
                              background-color: #2c2c2e;
                              padding: 24px;
                              border-radius: 14px;
                              box-shadow: 0 0 20px rgba(0,0,0,0.2);
                              backdrop-filter: blur(10px);
                              border: 1px solid #3a3a3c;
                            ">
                              <div style="font-size: 15px; color: #9e9e9e; margin-bottom: 12px;">Driver Info</div>
                              <div style="font-size: 16px; margin-bottom: 4px;">Kamba</div>
                              <div style="font-size: 14px; color: #cfcfcf;">+234 9088043424</div>
                              <div style="font-size: 13px; margin-top: 6px; color: #7c7c7c;">License: 6776649012840</div>
                            </section>
                          
                            <!-- Vehicle Panel -->
                            <section style="
                              background-color: #2c2c2e;
                              padding: 24px;
                              border-radius: 14px;
                              box-shadow: 0 0 20px rgba(0,0,0,0.2);
                              backdrop-filter: blur(10px);
                              border: 1px solid #3a3a3c;
                            ">
                              <div style="font-size: 15px; color: #9e9e9e; margin-bottom: 12px;">Vehicle</div>
                              <div style="font-size: 16px;">ENY-771EN </div>
                              <div style="font-size: 14px; margin-top: 4px; color: #cfcfcf;">20ft Container</div>
                              <div style="font-size: 13px; margin-top: 6px; color: #4cd964;">Status: In Transit</div>
                            </section>
                          
                            <!-- Stages Panel -->
                            <section style="grid-column: span 2; background-color: #2c2c2e; padding: 24px; border-radius: 14px; box-shadow: 0 0 20px rgba(0,0,0,0.2); border: 1px solid #3a3a3c;">
                              <div style="font-size: 15px; color: #9e9e9e; margin-bottom: 12px;">Journey Stages</div>
                              <div style="display: flex; flex-direction: column; gap: 12px; font-size: 14px;">
                                
                                <div class="journey-stage" style="display: flex; justify-content: space-between;"></div>
                                <div class="journey-stage" style="display: flex; justify-content: space-between;"></div>
                                <div class="journey-stage" style="display: flex; justify-content: space-between;"></div>
                                <div class="journey-stage" style="display: flex; justify-content: space-between;"></div>
                                <div class="journey-stage" style="display: flex; justify-content: space-between;"></div>
                                <div class="journey-stage" style="display: flex; justify-content: space-between;"></div>
                            
                              </div>
                            </section>
                            
                          
                            <!-- Controls Panel -->
                            <section style="
                              grid-column: span 2;
                              background-color: #2c2c2e;
                              padding: 24px;
                              border-radius: 14px;
                              box-shadow: 0 0 20px rgba(0,0,0,0.2);
                              border: 1px solid #3a3a3c;
                              display: flex;
                              justify-content: flex-start;
                              gap: 16px;
                              flex-wrap: wrap;
                            ">
                              <button style="
                                background-color: #3a3a3c;
                                color: #d1d1d6;
                                padding: 10px 18px;
                                font-size: 13px;
                                border-radius: 6px;
                                border: 1px solid #4a4a4a;
                                cursor: pointer;
                                transition: background 0.2s ease;
                              " onmouseover="this.style.backgroundColor='#48484a'" onmouseout="this.style.backgroundColor='#3a3a3c'">
                                Pause Tracking
                              </button>
                          
                              <button style="
                                background-color: #3a3a3c;
                                color: #d1d1d6;
                                padding: 10px 18px;
                                font-size: 13px;
                                border-radius: 6px;
                                border: 1px solid #4a4a4a;
                                cursor: pointer;
                                transition: background 0.2s ease;
                              " onmouseover="this.style.backgroundColor='#48484a'" onmouseout="this.style.backgroundColor='#3a3a3c'">
                                Report Delay
                              </button>
                            </section>
                          </div>
                          
                  
                      
                     
                    </div>
                  </div>
                  
                <div class="col-md-8 p-1">
                    <div id="cargoMap" style="height: 100%; border: 2px solid #fff5f5; border-radius: 10px;"></div>

                </div>
            </div>
        </div>
    </div> <!-- End Wrapper -->


    <!-- <script type="module">
      import 'https://cdn.jsdelivr.net/npm/@pwabuilder/pwaupdate';

      const el = document.createElement('pwa-update');
      document.body.appendChild(el);
    </script> -->

    <!-- Javascript -->
    <!-- <script src="assets/plugins/jquery/jquery.min.js"></script> -->
    <script src="assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- <script src="assets/plugins/simplebar/simplebar.min.js"></script> -->

    <script src='assets/plugins/charts/Chart.min.js'></script>
    <script src='assets/js/chart.js'></script>




    <script src='assets/plugins/jvectormap/jquery-jvectormap-2.0.3.min.js'></script>
    <script src='assets/plugins/jvectormap/jquery-jvectormap-world-mill.js'></script>
    <!-- <script src='assets/js/vector-map.js'></script> -->

    <script src='assets/plugins/daterangepicker/moment.min.js'></script>
    <script src='assets/plugins/daterangepicker/daterangepicker.js'></script>
    <script src='assets/js/date-range.js'></script>








    <script src='assets/plugins/toastr/toastr.min.js'></script>






    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let status = localStorage.getItem('login');
            // alert(status);
            if (!status) {
                console.log(status);
                window.location.href = "login.html";
            }
        });
    </script>
<script>
  const map = L.map('cargoMap').setView([8.5, 5.5], 6);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: '© OpenStreetMap'
  }).addTo(map);

  const stages = [
    { name: "Dry Port - Lagos", coords: [6.457362791240476, 3.3710084857050187] },
    { name: "Transit Hub - Ibadan", coords: [7.3775, 3.9470] },
    { name: "Checkpoint - Ilorin", coords: [8.4966, 4.5421] },
    { name: "Rest Stop - Lokoja", coords: [7.8023, 6.7333] },
    { name: "Transit Yard - Makurdi", coords: [7.7306, 8.5361] },
    { name: "Sea Port - Benue", coords: [10.485845884965759, 7.416666410966792] }
  ];

  const latlngs = stages.map(stage => stage.coords);

  stages.forEach(stage => {
    L.marker(stage.coords).addTo(map).bindPopup(stage.name);
  });

  L.polyline(latlngs, { color: 'blue', weight: 4, dashArray: '5,10' }).addTo(map);

  const truckIcon = L.icon({
    iconUrl: 'https://www.pngplay.com/wp-content/uploads/2/Truck-Transparent-Images.png',
    iconSize: [40, 40],
    iconAnchor: [20, 20]
  });

  const movingMarker = L.marker(latlngs[0], { icon: truckIcon }).addTo(map);

  let currentSegment = 0;
  let step = 0;
  const stepsPerSegment = 100;
  const delay = 200; // ms (slightly faster for demo)

  // 🆕 For journey UI
  const journeyElements = document.querySelectorAll('.journey-stage');

  function updateJourneyStatus() {
    journeyElements.forEach((el, index) => {
      if (index < currentSegment) {
        el.innerHTML = `<span>${stages[index].name}</span><span style="color: #4cd964;">✔ Completed</span>`;
      } else if (index === currentSegment) {
        el.innerHTML = `<span>${stages[index].name}</span><span style="color: #ffd60a;">In Progress</span>`;
      } else {
        el.innerHTML = `<span>${stages[index].name}</span><span style="color: #ff453a;">Not Started</span>`;
      }
    });
  }

  function animateMarker() {
    if (currentSegment >= latlngs.length - 1) return;

    const start = latlngs[currentSegment];
    const end = latlngs[currentSegment + 1];

    const lat = start[0] + ((end[0] - start[0]) * step) / stepsPerSegment;
    const lng = start[1] + ((end[1] - start[1]) * step) / stepsPerSegment;

    movingMarker.setLatLng([lat, lng]);
    map.panTo([lat, lng]);

    step++;
    if (step > stepsPerSegment) {
      step = 0;
      currentSegment++;
      updateJourneyStatus(); // 🆕 update the journey UI
    }

    requestAnimationFrame(() => setTimeout(animateMarker, delay));
  }

  // Initialize journey UI
  updateJourneyStatus();
  animateMarker();

  map.fitBounds(latlngs);
</script>


  


    <!-- <script src="assets/js/sleek.js"></script>
  <link href="assets/options/optionswitch.css" rel="stylesheet">
<script src="assets/options/optionswitcher.js"></script> -->
</body>

</html>